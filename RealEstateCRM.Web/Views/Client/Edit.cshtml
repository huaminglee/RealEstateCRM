@model OUDAL.Client

@{
    ViewBag.Title = "客户信息";
    Layout = "~/Views/Shared/_InfoLayout.cshtml";
}
    
<script type="text/javascript">
    jQuery(document).ready(function () {   
    $( ".datepicker" ).datepicker({changeMonth: true,changeYear: true,showButtonPanel: true,showOtherMonths: true,selectOtherMonths: true});
   
    });
    function RoomTypeChanged() {
        var roomtype = "";
        $('input[name="RoomType"]:checked').each(function () {
            if(roomtype=="")
                roomtype += $(this).val();
            else
                roomtype += (","+$(this).val());
        });
        //alert(roomtype);
        $("#RoomType").val(roomtype);
    }
</script>
<div style="width:700px;margin:0px auto">
@using (Html.BeginForm() ){
    @Html.ValidationSummary(true)
    @Html.ValidationMessageFor(m => m.AllPhone)
    @Html.HiddenFor(model => model.Id)
    <fieldset>
        <legend>客户信息</legend>
        <table class="table table-bordered">
            <tr>
                <td class="tdRight">@Html.DisplayNameFor(m=>m.Name)</td>
                <td>@Html.EditorFor(m=>m.Name)@Html.ValidationMessageFor(m=>m.Name)</td>
                <td class="tdRight">@Html.DisplayNameFor(m => m.Sex)</td>
                <td>@Html.EditorFor(m => m.Sex)@Html.ValidationMessageFor(m => m.Sex)</td>
            </tr>
            <tr>
                <td class="tdRight">@Html.DisplayNameFor(m => m.AllPhone)</td>
                @foreach(var phone in ViewBag.Phones)
                {
                    <td><input class="text-box" type="text" name="AllPhone" value="@phone" /></td>
                }
            </tr>
            <tr>
                <td class="tdRight">@Html.DisplayNameFor(m => m.Way)</td>
                <td>@Html.EditorFor(m => m.Way)@Html.ValidationMessageFor(m => m.Way)</td>
                <td class="tdRight">@Html.DisplayNameFor(m => m.WayExtend)</td>
                <td>@Html.EditorFor(m => m.WayExtend)@Html.ValidationMessageFor(m => m.WayExtend)</td>
            </tr>
            <tr>
                <td class="tdRight">@Html.DisplayNameFor(m => m.ProjectId)</td>
                <td>@Html.DropDownListFor(m => m.ProjectId, DepartmentBLL.GetDepartmentByType(Model.ProjectId), new { @readonly = "readonly" })
                @Html.ValidationMessageFor(m => m.ProjectId)
                @*<input id="ProjectId" value="@Model.ProjectId" style="display:none;"/>*@</td>
                <td class="tdRight">@Html.DisplayNameFor(m => m.GroupId)</td>
                <td>@Html.DropDownListFor(m => m.GroupId, DepartmentBLL.GetDepartmentByType(Model.ProjectId, Model.GroupId), new { @readonly = "readonly" })
                @Html.ValidationMessageFor(m => m.GroupId)
                    @*<input id="GroupId" value="@Model.GroupId" style="display:none;" />*@</td>
</tr>
            <tr>
                <td class="tdRight">@Html.DisplayNameFor(m => m.RoomType)</td>
                <td colspan="3">
                    @foreach (SelectListItem s in ViewBag.RoomTypes)
                    {
                        <label><input name="RoomType" type="checkbox" checked="@s.Selected" value="@s.Value" onclick="RoomTypeChanged()"/>@s.Text</label>
                    }
                    <input id="RoomType" type="text" style="display:none"/>
                </td>
                
            </tr>
            <tr>
                <td class="tdRight">@Html.DisplayNameFor(m => m.Code)</td>
                <td>@Html.TextBoxFor(m => m.Code, new { @readonly = "readonly" })@Html.ValidationMessageFor(m => m.Code)</td>
                <td class="tdRight">@Html.DisplayNameFor(m => m.Remark)</td>
                <td>@Html.TextAreaFor(m => m.Remark)@Html.ValidationMessageFor(m => m.Remark)</td>
            </tr>


        </table>
                    
    </fieldset>
    <p style="text-align:center">@MyControls.SubmitBtn("保存") @MyControls.Btn("取消", "window.close()")</p>
}
</div>

