(function(n){var e={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},h={check:{enable:!1,chkStyle:e.checkbox.STYLE,radioType:e.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},c=function(n){var t=i.getRoot(n);t.radioCheckedList=[]},l=function(){},a=function(n){var t=n.treeObj,i=r.event;t.unbind(i.CHECK),t.bind(i.CHECK,function(t,i,r){u.apply(n.callback.onCheck,[t,i,r])})},v=function(n){var t=n.target,s=i.getSetting(n.data.treeId),f="",c=null,e="",h=null;if(u.eqs(n.type,"mouseover")?s.check.enable&&u.eqs(t.tagName,"button")&&t.getAttribute("treeNode"+r.id.CHECK)!==null&&(f=t.parentNode.id,e="mouseoverCheck"):u.eqs(n.type,"mouseout")?s.check.enable&&u.eqs(t.tagName,"button")&&t.getAttribute("treeNode"+r.id.CHECK)!==null&&(f=t.parentNode.id,e="mouseoutCheck"):u.eqs(n.type,"click")&&s.check.enable&&u.eqs(t.tagName,"button")&&t.getAttribute("treeNode"+r.id.CHECK)!==null&&(f=t.parentNode.id,e="checkNode"),f.length>0){c=i.getNodeCache(s,f);switch(e){case"checkNode":h=o.onCheckNode;break;case"mouseoverCheck":h=o.onMouseoverCheck;break;case"mouseoutCheck":h=o.onMouseoutCheck}}return{stop:!1,node:c,nodeEventType:e,nodeEventCallback:h,treeEventType:"",treeEventCallback:null}},y=function(n,t,r){if(r){var f=n.data.key.checked;typeof r[f]=="string"&&(r[f]=u.eqs(r[f],"true")),r[f]=!!r[f],r.checkedOld=r[f],r.nocheck=!!r.nocheck,r.check_Child_State=-1,r.check_Focus=!1,r.getCheckStatus=function(){return i.getCheckStatus(n,r)}}},p=function(n,u,f){var o=n.data.key.checked,e;n.check.enable&&(i.makeChkFlag(n,u),n.check.chkStyle==r.radio.STYLE&&n.check.radioType==r.radio.TYPE_ALL&&u[o]&&(e=i.getRoot(n),e.radioCheckedList.push(u)),f.push("<button type='button' ID='",u.tId,r.id.CHECK,"' class='",t.makeChkClass(n,u),"' treeNode",r.id.CHECK," onfocus='this.blur();' ",u.nocheck===!0?"style='display:none;'":"","><\/button>"))},w=function(f,e){e.checkNode=function(i,e,o){var s=this.setting.data.key.checked,h;if(i[s]!==!!e||o){if(u.apply(this.setting.callback.beforeCheck,[this.setting.treeId,i],!0)==!1)return}else return;u.uCanDo(this.setting)&&this.setting.check.enable&&i.nocheck!==!0&&(i[s]=!!e,h=n("#"+i.tId+r.id.CHECK),(o||this.setting.check.chkStyle===r.radio.STYLE)&&t.checkNodeRelation(this.setting,i),t.setChkClass(this.setting,h,i),t.repairParentChkClassWithSelf(this.setting,i),f.treeObj.trigger(r.event.CHECK,[f.treeId,i]))},e.checkAllNodes=function(n){t.repairAllChk(this.setting,!!n)},e.getCheckedNodes=function(n){var t=this.setting.data.key.childs;return n=n!==!1,i.getTreeCheckedNodes(this.setting,i.getRoot(f)[t],n)},e.getChangeCheckedNodes=function(){var n=this.setting.data.key.childs;return i.getTreeChangeCheckedNodes(this.setting,i.getRoot(f)[n])};var o=e.updateNode;e.updateNode=function(i,f){var s,h;(o&&o.apply(e,arguments),i&&this.setting.check.enable)&&(s=n("#"+i.tId),s.get(0)&&u.uCanDo(this.setting)&&(h=n("#"+i.tId+r.id.CHECK),(f==!0||this.setting.check.chkStyle===r.radio.STYLE)&&t.checkNodeRelation(this.setting,i),t.setChkClass(this.setting,h,i),t.repairParentChkClassWithSelf(this.setting,i)))}},b={getRadioCheckedList:function(n){for(var r=i.getRoot(n).radioCheckedList,t=0,u=r.length;t<u;t++)i.getNodeCache(n,r[t].tId)||(r.splice(t,1),t--,u--);return r},getCheckStatus:function(n,t){if(!n.check.enable||t.nocheck)return null;var i=n.data.key.checked;return{checked:t[i],half:n.check.chkStyle==r.radio.STYLE?t.check_Child_State===2:t[i]?t.check_Child_State>-1&&t.check_Child_State<2:t.check_Child_State>0}},getTreeCheckedNodes:function(n,t,r,u){var e,o,f,s;if(!t)return[];for(e=n.data.key.childs,o=n.data.key.checked,u=u?u:[],f=0,s=t.length;f<s;f++)t[f].nocheck!==!0&&t[f][o]==r&&u.push(t[f]),i.getTreeCheckedNodes(n,t[f][e],r,u);return u},getTreeChangeCheckedNodes:function(n,t,r){var f,e,u,o;if(!t)return[];for(f=n.data.key.childs,e=n.data.key.checked,r=r?r:[],u=0,o=t.length;u<o;u++)t[u].nocheck!==!0&&t[u][e]!=t[u].checkedOld&&r.push(t[u]),i.getTreeChangeCheckedNodes(n,t[u][f],r);return r},makeChkFlag:function(n,t){var e,h,i,u;if(t){var o=n.data.key.childs,s=n.data.key.checked,f=-1;if(t[o])for(e=0,h=t[o].length;e<h;e++)if(i=t[o][e],u=-1,n.check.chkStyle==r.radio.STYLE)if(u=i.nocheck===!0?i.check_Child_State:i.nocheck!==!0&&i[s]?2:i.check_Child_State>0?2:0,u==2){f=2;break}else u==0&&(f=0);else if(n.check.chkStyle==r.checkbox.STYLE)if(u=i.nocheck===!0?i.check_Child_State:i.nocheck!==!0&&i[s]?i.check_Child_State===-1||i.check_Child_State===2?2:1:i.check_Child_State>0?1:0,u===1){f=1;break}else if(u===2&&e>0&&u!==f){f=1;break}else if(f===2&&u>-1&&u<2){f=1;break}else u>-1&&(f=u);t.check_Child_State=f}}},o={onCheckNode:function(f,e){var o=i.getSetting(f.data.treeId),s=o.data.key.checked,h;return u.apply(o.callback.beforeCheck,[o.treeId,e],!0)==!1?!0:(e[s]=!e[s],t.checkNodeRelation(o,e),h=n("#"+e.tId+r.id.CHECK),t.setChkClass(o,h,e),t.repairParentChkClassWithSelf(o,e),o.treeObj.trigger(r.event.CHECK,[o.treeId,e]),!0)},onMouseoverCheck:function(u,f){var e=i.getSetting(u.data.treeId),o=n("#"+f.tId+r.id.CHECK);return f.check_Focus=!0,t.setChkClass(e,o,f),!0},onMouseoutCheck:function(u,f){var e=i.getSetting(u.data.treeId),o=n("#"+f.tId+r.id.CHECK);return f.check_Focus=!1,t.setChkClass(e,o,f),!0}},k={checkNodeRelation:function(u,f){var o,e,l,c=u.data.key.childs,s=u.data.key.checked,a=r.radio,h,v;if(u.check.chkStyle==a.STYLE){if(h=i.getRadioCheckedList(u),f[s])if(u.check.radioType==a.TYPE_ALL){for(e=h.length-1;e>=0;e--)o=h[e],o[s]=!1,h.splice(e,1),t.setChkClass(u,n("#"+o.tId+r.id.CHECK),o),o.parentTId!=f.parentTId&&t.repairParentChkClassWithSelf(u,o);h.push(f)}else for(v=f.parentTId?f.getParentNode():i.getRoot(u),e=0,l=v[c].length;e<l;e++)o=v[c][e],o[s]&&o!=f&&(o[s]=!1,t.setChkClass(u,n("#"+o.tId+r.id.CHECK),o));else if(u.check.radioType==a.TYPE_ALL)for(e=0,l=h.length;e<l;e++)if(f==h[e]){h.splice(e,1);break}}else f[s]&&(!f[c]||f[c].length==0||u.check.chkboxType.Y.indexOf("s")>-1)&&t.setSonNodeCheckBox(u,f,!0),f[s]&&u.check.chkboxType.Y.indexOf("p")>-1&&t.setParentNodeCheckBox(u,f,!0),!f[s]&&(!f[c]||f[c].length==0||u.check.chkboxType.N.indexOf("s")>-1)&&t.setSonNodeCheckBox(u,f,!1),!f[s]&&u.check.chkboxType.N.indexOf("p")>-1&&t.setParentNodeCheckBox(u,f,!1)},makeChkClass:function(n,t){var f=n.data.key.checked,i=r.checkbox,o=r.radio,e="",u;return e=n.check.chkStyle==o.STYLE?t.check_Child_State<1?i.FULL:i.PART:t[f]?t.check_Child_State===2||t.check_Child_State===-1?i.FULL:i.PART:t.check_Child_State<1?i.FULL:i.PART,u=n.check.chkStyle+"_"+(t[f]?i.TRUE:i.FALSE)+"_"+e,u=t.check_Focus?u+"_"+i.FOCUS:u,i.DEFAULT+" "+u},repairAllChk:function(n,u){var f,h,e;if(n.check.enable&&n.check.chkStyle===r.checkbox.STYLE){var c=n.data.key.checked,o=n.data.key.childs,s=i.getRoot(n);for(f=0,h=s[o].length;f<h;f++)e=s[o][f],e.nocheck!==!0&&(e[c]=u),t.setSonNodeCheckBox(n,e,u)}},repairChkClass:function(u,f){if(f){i.makeChkFlag(u,f);var e=n("#"+f.tId+r.id.CHECK);t.setChkClass(u,e,f)}},repairParentChkClass:function(n,i){if(i&&i.parentTId){var r=i.getParentNode();t.repairChkClass(n,r),t.repairParentChkClass(n,r)}},repairParentChkClassWithSelf:function(n,i){if(i){var r=n.data.key.childs;i[r]&&i[r].length>0?t.repairParentChkClass(n,i[r][0]):t.repairParentChkClass(n,i)}},setChkClass:function(n,i,r){i&&(r.nocheck===!0?i.hide():i.show(),i.removeClass(),i.addClass(t.makeChkClass(n,r)))},setParentNodeCheckBox:function(u,f,e){var a=u.data.key.childs,c=u.data.key.checked,v=n("#"+f.tId+r.id.CHECK),h,s,o,l;if(i.makeChkFlag(u,f),f.nocheck!==!0&&(f[c]=e,t.setChkClass(u,v,f)),f.parentTId){if(h=!0,!e)for(s=f.getParentNode()[a],o=0,l=s.length;o<l;o++)if(s[o].nocheck!==!0&&s[o][c]||s[o].nocheck===!0&&s[o].check_Child_State>0){h=!1;break}h&&t.setParentNodeCheckBox(u,f.getParentNode(),e)}},setSonNodeCheckBox:function(u,f,e){var o,h;if(f){var s=u.data.key.childs,c=u.data.key.checked,l=n("#"+f.tId+r.id.CHECK);if(f!=i.getRoot(u)&&(f.nocheck!==!0?(f[c]=e,f.check_Child_State=e?2:0):f.check_Child_State=-1,t.setChkClass(u,l,f)),f[s])for(o=0,h=f[s].length;o<h;o++)f[s][o]&&t.setSonNodeCheckBox(u,f[s][o],e)}}},d={tools:{},view:k,event:{},data:b},s;n.extend(!0,n.fn.zTree.consts,e),n.extend(!0,n.fn.zTree._z,d);var f=n.fn.zTree,u=f._z.tools,r=f.consts,t=f._z.view,i=f._z.data,g=f._z.event;i.exSetting(h),i.addInitBind(a),i.addInitCache(l),i.addInitNode(y),i.addInitProxy(v),i.addInitRoot(c),i.addBeforeA(p),i.addZTreeTools(w),s=t.createNodes,t.createNodes=function(n,i,r,u){(s&&s.apply(t,arguments),r)&&t.repairParentChkClassWithSelf(n,u)}})(jQuery);
//@ sourceMappingURL=jquery.ztree.excheck-3.0.min.js.map