(function(n){var o=[],l=[],h=[],v=0,a={treeId:"",treeObj:null,view:{autoCancelSelected:!0,showLine:!0,showIcon:!0,showTitle:!0,selectedMulti:!0,expandSpeed:"fast",addDiyDom:null,dblClickExpand:!0,fontCss:{}},data:{key:{name:"name",childs:"childs",title:"name"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null}},y=function(n){var i=t.getRoot(n);i||(i={},t.setRoot(n,i)),i.childs=[],i.expandTriggerFlag=!1,i.curSelectedList=[],i.noSelection=!0,i.createdNodes=[]},p=function(n){var i=t.getCache(n);i||(i={},t.setCache(n,i)),i.nodes=[],i.doms=[]},w=function(n){var t=n.treeObj,r=i.event;t.unbind(r.NODECREATED),t.bind(r.NODECREATED,function(t,i,r){u.apply(n.callback.onNodeCreated,[t,i,r])}),t.unbind(r.CLICK),t.bind(r.CLICK,function(t,i,r,f){u.apply(n.callback.onClick,[t,i,r,f])}),t.unbind(r.EXPAND),t.bind(r.EXPAND,function(t,i,r){u.apply(n.callback.onExpand,[t,i,r])}),t.unbind(r.COLLAPSE),t.bind(r.COLLAPSE,function(t,i,r){u.apply(n.callback.onCollapse,[t,i,r])}),t.unbind(r.ASYNC_SUCCESS),t.bind(r.ASYNC_SUCCESS,function(t,i,r,f){u.apply(n.callback.onAsyncSuccess,[t,i,r,f])}),t.unbind(r.ASYNC_ERROR),t.bind(r.ASYNC_ERROR,function(t,i,r,f,e,o){u.apply(n.callback.onAsyncError,[t,i,r,f,e,o])})},b=function(n){var f=n.target,e=o[n.data.treeId],h="",v=null,l="",c="",y=null,a=null,r=null;if(u.eqs(n.type,"mousedown")?c="mousedown":u.eqs(n.type,"mouseup")?c="mouseup":u.eqs(n.type,"contextmenu")?c="contextmenu":u.eqs(n.type,"click")?(u.eqs(f.tagName,"button")&&f.blur(),u.eqs(f.tagName,"button")&&f.getAttribute("treeNode"+i.id.SWITCH)!==null?(h=f.parentNode.id,l="switchNode"):(r=u.getMDom(e,f,[{tagName:"a",attrName:"treeNode"+i.id.A}]),r&&(h=r.parentNode.id,l="clickNode"))):u.eqs(n.type,"dblclick")&&(c="dblclick",r=u.getMDom(e,f,[{tagName:"a",attrName:"treeNode"+i.id.A}]),r&&(h=r.parentNode.id,l="switchNode")),c.length>0&&h.length==0&&(r=u.getMDom(e,f,[{tagName:"a",attrName:"treeNode"+i.id.A}]),r&&(h=r.parentNode.id)),h.length>0){v=t.getNodeCache(e,h);switch(l){case"switchNode":u.eqs(n.type,"click")||u.eqs(n.type,"dblclick")&&u.apply(e.view.dblClickExpand,[e.treeId,v],e.view.dblClickExpand)?y=s.onSwitchNode:l="";break;case"clickNode":y=s.onClickNode}}switch(c){case"mousedown":a=s.onZTreeMousedown;break;case"mouseup":a=s.onZTreeMouseup;break;case"dblclick":a=s.onZTreeDblclick;break;case"contextmenu":a=s.onZTreeContextmenu}return{stop:!1,node:v,nodeEventType:l,nodeEventCallback:y,treeEventType:c,treeEventCallback:a}},k=function(n,i,r,f,e,o){if(r){var s=n.data.key.childs;r.level=i,r.tId=n.treeId+"_"+ ++v,r.parentTId=f?f.tId:null,r[s]&&r[s].length>0?(typeof r.open=="string"&&(r.open=u.eqs(r.open,"true")),r.open=!!r.open,r.isParent=!0):(r.open=!1,typeof r.isParent=="string"&&(r.isParent=u.eqs(r.isParent,"true")),r.isParent=!!r.isParent),r.isFirstNode=e,r.isLastNode=o,r.getParentNode=function(){return t.getNodeCache(n,r.parentTId)},r.getPreNode=function(){return t.getPreNode(n,r)},r.getNextNode=function(){return t.getNextNode(n,r)},r.isAjaxing=!1,t.fixPIdKeyValue(n,r)}},f={bind:[w],caches:[p],nodes:[k],proxys:[b],roots:[y],beforeA:[],afterA:[],innerBeforeA:[],innerAfterA:[],zTreeTools:[]},t={addNodeCache:function(n,i){t.getCache(n).nodes[i.tId]=i},addAfterA:function(n){f.afterA.push(n)},addBeforeA:function(n){f.beforeA.push(n)},addInnerAfterA:function(n){f.innerAfterA.push(n)},addInnerBeforeA:function(n){f.innerBeforeA.push(n)},addInitBind:function(n){f.bind.push(n)},addInitCache:function(n){f.caches.push(n)},addInitNode:function(n){f.nodes.push(n)},addInitProxy:function(n){f.proxys.push(n)},addInitRoot:function(n){f.roots.push(n)},addNodesData:function(n,t,i){var u=n.data.key.childs;t[u]||(t[u]=[]),t[u].length>0&&(t[u][t[u].length-1].isLastNode=!1,r.setNodeLineIcos(n,t[u][t[u].length-1])),t.isParent=!0,t[u]=t[u].concat(i)},addSelectedNode:function(n,i){var r=t.getRoot(n);t.isSelectedNode(n,i)||r.curSelectedList.push(i)},addCreatedNode:function(n,i){if(!!n.callback.onNodeCreated||!!n.view.addDiyDom){var r=t.getRoot(n);r.createdNodes.push(i)}},addZTreeTools:function(n){f.zTreeTools.push(n)},exSetting:function(t){n.extend(!0,a,t)},fixPIdKeyValue:function(n,t){n.data.simpleData.enable&&(t[n.data.simpleData.pIdKey]=t.parentTId?t.getParentNode()[n.data.simpleData.idKey]:n.data.simpleData.rootPId)},getAfterA:function(){for(var n=0,t=f.afterA.length;n<t;n++)f.afterA[n].apply(this,arguments)},getBeforeA:function(){for(var n=0,t=f.beforeA.length;n<t;n++)f.beforeA[n].apply(this,arguments)},getInnerAfterA:function(){for(var n=0,t=f.innerAfterA.length;n<t;n++)f.innerAfterA[n].apply(this,arguments)},getInnerBeforeA:function(){for(var n=0,t=f.innerBeforeA.length;n<t;n++)f.innerBeforeA[n].apply(this,arguments)},getCache:function(n){return h[n.treeId]},getNextNode:function(n,i){var r,u,f,e;if(!i||(r=n.data.key.childs,u=i.parentTId?i.getParentNode():t.getRoot(n),i.isLastNode))return null;if(i.isFirstNode)return u[r][1];for(f=1,e=u[r].length-1;f<e;f++)if(u[r][f]===i)return u[r][f+1];return null},getNodeByParam:function(n,i,r,u){var o,f,s,e;if(!i||!r)return null;for(o=n.data.key.childs,f=0,s=i.length;f<s;f++){if(i[f][r]==u)return i[f];if(e=t.getNodeByParam(n,i[f][o],r,u),e)return e}return null},getNodeCache:function(n,t){if(!t)return null;var i=h[n.treeId].nodes[t];return i?i:null},getNodes:function(n){return t.getRoot(n)[n.data.key.childs]},getNodesByParam:function(n,i,r,u){var o,e,f,s;if(!i||!r)return[];for(o=n.data.key.childs,e=[],f=0,s=i.length;f<s;f++)i[f][r]==u&&e.push(i[f]),e=e.concat(t.getNodesByParam(n,i[f][o],r,u));return e},getNodesByParamFuzzy:function(n,i,r,u){var o,e,f,s;if(!i||!r)return[];for(o=n.data.key.childs,e=[],f=0,s=i.length;f<s;f++)typeof i[f][r]=="string"&&i[f][r].indexOf(u)>-1&&e.push(i[f]),e=e.concat(t.getNodesByParamFuzzy(n,i[f][o],r,u));return e},getPreNode:function(n,i){var r,u,f,e;if(!i||(r=n.data.key.childs,u=i.parentTId?i.getParentNode():t.getRoot(n),i.isFirstNode))return null;if(i.isLastNode)return u[r][u[r].length-2];for(f=1,e=u[r].length-1;f<e;f++)if(u[r][f]===i)return u[r][f-1];return null},getRoot:function(n){return n?l[n.treeId]:null},getSetting:function(n){return o[n]},getSettings:function(){return o},getZTreeTools:function(n){var t=this.getRoot(this.getSetting(n));return t?t.treeTools:null},initCache:function(){for(var n=0,t=f.caches.length;n<t;n++)f.caches[n].apply(this,arguments)},initNode:function(){for(var n=0,t=f.nodes.length;n<t;n++)f.nodes[n].apply(this,arguments)},initRoot:function(){for(var n=0,t=f.roots.length;n<t;n++)f.roots[n].apply(this,arguments)},isSelectedNode:function(n,i){for(var u=t.getRoot(n),r=0,f=u.curSelectedList.length;r<f;r++)if(i===u.curSelectedList[r])return!0;return!1},removeNodeCache:function(n,i){var u=n.data.key.childs,r,f;if(i[u])for(r=0,f=i[u].length;r<f;r++)arguments.callee(n,i[u][r]);delete t.getCache(n).nodes[i.tId]},removeSelectedNode:function(n,i){for(var u=t.getRoot(n),r=0,f=u.curSelectedList.length;r<f;r++)i!==u.curSelectedList[r]&&t.getNodeCache(n,u.curSelectedList[r].tId)||(u.curSelectedList.splice(r,1),r--,f--)},setCache:function(n,t){h[n.treeId]=t},setRoot:function(n,t){l[n.treeId]=t},setZTreeTools:function(){for(var n=0,t=f.zTreeTools.length;n<t;n++)f.zTreeTools[n].apply(this,arguments)},transformToArrayFormat:function(n,i){var e,r,f,o;if(!i)return[];if(e=n.data.key.childs,r=[],u.isArray(i))for(f=0,o=i.length;f<o;f++)r.push(i[f]),i[f][e]&&(r=r.concat(t.transformToArrayFormat(n,i[f][e])));else r.push(i),i[e]&&(r=r.concat(t.transformToArrayFormat(n,i[e])));return r},transformTozTreeFormat:function(n,t){var i,f,o=n.data.simpleData.idKey,e=n.data.simpleData.pIdKey,s=n.data.key.childs,h,r;if(!o||o==""||!t)return[];if(u.isArray(t)){for(h=[],r=[],i=0,f=t.length;i<f;i++)r[t[i][o]]=t[i];for(i=0,f=t.length;i<f;i++)r[t[i][e]]?(r[t[i][e]][s]||(r[t[i][e]][s]=[]),r[t[i][e]][s].push(t[i])):h.push(t[i]);return h}return[t]}},e={bindEvent:function(){for(var n=0,t=f.bind.length;n<t;n++)f.bind[n].apply(this,arguments)},bindTree:function(n){var i={treeId:n.treeId},t=n.treeObj;t.unbind("click",e.proxy),t.bind("click",i,e.proxy),t.unbind("dblclick",e.proxy),t.bind("dblclick",i,e.proxy),t.unbind("mouseover",e.proxy),t.bind("mouseover",i,e.proxy),t.unbind("mouseout",e.proxy),t.bind("mouseout",i,e.proxy),t.unbind("mousedown",e.proxy),t.bind("mousedown",i,e.proxy),t.unbind("mouseup",e.proxy),t.bind("mouseup",i,e.proxy),t.unbind("contextmenu",e.proxy),t.bind("contextmenu",i,e.proxy)},doProxy:function(){for(var i=[],t,n=0,r=f.proxys.length;n<r;n++)if(t=f.proxys[n].apply(this,arguments),i.push(t),t.stop)break;return i},proxy:function(n){var s=t.getSetting(n.data.treeId),f,c,i;if(!u.uCanDo(s,n))return!0;var h=e.doProxy(n),r=!0,o=!1;for(f=0,c=h.length;f<c;f++)i=h[f],i.nodeEventCallback&&(o=!0,r=i.nodeEventCallback.apply(i,[n,i.node])&&r),i.treeEventCallback&&(o=!0,r=i.treeEventCallback.apply(i,[n,i.node])&&r);return o&&u.noSel(s),r}},s={onSwitchNode:function(n,i){var f=o[n.data.treeId];if(i.open){if(u.apply(f.callback.beforeCollapse,[f.treeId,i],!0)==!1)return!0;t.getRoot(f).expandTriggerFlag=!0,r.switchNode(f,i)}else{if(u.apply(f.callback.beforeExpand,[f.treeId,i],!0)==!1)return!0;t.getRoot(f).expandTriggerFlag=!0,r.switchNode(f,i)}return!0},onClickNode:function(n,f){var e=o[n.data.treeId],s=e.view.autoCancelSelected&&n.ctrlKey&&t.isSelectedNode(e,f)?0:e.view.autoCancelSelected&&n.ctrlKey&&e.view.selectedMulti?2:1;return u.apply(e.callback.beforeClick,[e.treeId,f,s],!0)==!1?!0:(s===0?r.cancelPreSelectedNode(e,f):r.selectNode(e,f,s===2),e.treeObj.trigger(i.event.CLICK,[e.treeId,f,s]),!0)},onZTreeMousedown:function(n,t){var i=o[n.data.treeId];return u.apply(i.callback.beforeMouseDown,[i.treeId,t],!0)&&u.apply(i.callback.onMouseDown,[n,i.treeId,t]),!0},onZTreeMouseup:function(n,t){var i=o[n.data.treeId];return u.apply(i.callback.beforeMouseUp,[i.treeId,t],!0)&&u.apply(i.callback.onMouseUp,[n,i.treeId,t]),!0},onZTreeDblclick:function(n,t){var i=o[n.data.treeId];return u.apply(i.callback.beforeDblClick,[i.treeId,t],!0)&&u.apply(i.callback.onDblClick,[n,i.treeId,t]),!0},onZTreeContextmenu:function(n,t){var i=o[n.data.treeId];return u.apply(i.callback.beforeRightClick,[i.treeId,t],!0)&&u.apply(i.callback.onRightClick,[n,i.treeId,t]),typeof i.callback.onRightClick!="function"}},u={apply:function(n,t,i){return typeof n=="function"?n.apply(c,t):i},clone:function(n){var t,i,r;if(n instanceof Array){for(t=[],i=n.length;i--;)t[i]=arguments.callee(n[i]);return t}if(typeof n=="function")return n;if(n instanceof Object){t={};for(r in n)t[r]=arguments.callee(n[r]);return t}return n},eqs:function(n,t){return n.toLowerCase()===t.toLowerCase()},isArray:function(n){return Object.prototype.toString.apply(n)==="[object Array]"},getMDom:function(n,t,i){if(!t)return null;while(t&&t.id!==n.treeId){for(var r=0,f=i.length;t.tagName&&r<f;r++)if(u.eqs(t.tagName,i[r].tagName)&&t.getAttribute(i[r].attrName)!==null)return t;t=t.parentNode}return null},noSel:function(n){var i=t.getRoot(n);if(i.noSelection)try{window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()}catch(r){}},uCanDo:function(){return!0}},r={addNodes:function(f,e,o,s){if(!f.data.keep.leaf||!e||e.isParent)if(u.isArray(o)||(o=[o]),f.data.simpleData.enable&&(o=t.transformTozTreeFormat(f,o)),e){var h=n("#"+e.tId+i.id.SWITCH),c=n("#"+e.tId+i.id.ICON),l=n("#"+e.tId+i.id.UL);e.open||(r.replaceSwitchClass(h,i.folder.CLOSE),r.replaceIcoClass(e,c,i.folder.CLOSE),e.open=!1,l.css({display:"none"})),t.addNodesData(f,e,o),r.createNodes(f,e.level+1,o,e),s||r.expandCollapseParentNode(f,e,!0)}else t.addNodesData(f,t.getRoot(f),o),r.createNodes(f,0,o,null)},appendNodes:function(n,f,e,o,s,h){var a,b,y,w;if(!e)return[];var l=[],v=n.data.key.childs,g=n.data.key.name,nt=n.data.key.title;for(a=0,b=e.length;a<b;a++){var c=e[a],tt=o?o:t.getRoot(n),it=tt[v],rt=it.length==e.length&&a==0,ut=a==e.length-1;if(s&&(t.initNode(n,f,c,o,rt,ut,h),t.addNodeCache(n,c)),y=[],c[v]&&c[v].length>0&&(y=r.appendNodes(n,f+1,c[v],c,s,h&&c.open)),h){var p=r.makeNodeUrl(n,c),k=r.makeNodeFontCss(n,c),d=[];for(w in k)d.push(w,":",k[w],";");l.push("<li id='",c.tId,"' class='level",c.level,"' treenode>","<button type='button' id='",c.tId,i.id.SWITCH,"' title='' class='",r.makeNodeLineClass(n,c),"' treeNode",i.id.SWITCH,"><\/button>"),t.getBeforeA(n,c,l),l.push("<a id='",c.tId,i.id.A,"' class='level",c.level,"' treeNode",i.id.A,' onclick="',c.click||"",'" ',p!=null&&p.length>0?"href='"+p+"'":""," target='",r.makeNodeTarget(c),"' style='",d.join(""),"'"),u.apply(n.view.showTitle,[n.treeId,c],n.view.showTitle)&&l.push("title='",c[nt].replace(/'/g,"&#39;"),"'"),l.push(">"),t.getInnerBeforeA(n,c,l),l.push("<button type='button' id='",c.tId,i.id.ICON,"' title='' treeNode",i.id.ICON," class='",r.makeNodeIcoClass(n,c),"' style='",r.makeNodeIcoStyle(n,c),"'><\/button><span id='",c.tId,i.id.SPAN,"'>",c[g].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"<\/span>"),t.getInnerAfterA(n,c,l),l.push("<\/a>"),t.getAfterA(n,c,l),c.isParent&&c.open&&r.makeUlHtml(n,c,l,y.join("")),l.push("<\/li>"),t.addCreatedNode(n,c)}}return l},appendParentULDom:function(t,u){var e=[],f=n("#"+u.tId),o=n("#"+u.tId+i.id.UL),s=t.data.key.childs,h=r.appendNodes(t,u.level+1,u[s],u,!1,!0);r.makeUlHtml(t,u,e,h.join("")),f.get(0)||!u.parentTId||(r.appendParentULDom(t,u.getParentNode()),f=n("#"+u.tId)),o.get(0)&&o.remove(),f.append(e.join("")),r.createNodeCallback(t)},asyncNode:function(t,f,e,o){var s,l,y,h,c,a,v;if(f&&!f.isParent)return u.apply(o),!1;if(f&&f.isAjaxing)return!1;if(u.apply(t.callback.beforeAsync,[t.treeId,f],!0)==!1)return u.apply(o),!1;for(f&&(f.isAjaxing=!0,y=n("#"+f.tId+i.id.ICON),y.attr({style:"","class":"ico_loading"})),h="",s=0,l=t.async.autoParam.length;f&&s<l;s++)c=t.async.autoParam[s].split("="),a=c,c.length>1&&(a=c[1],c=c[0]),h+=(h.length>0?"&":"")+a+"="+f[c];if(u.isArray(t.asyncParamOther))for(s=0,l=t.asyncParamOther.length;s<l;s+=2)h+=(h.length>0?"&":"")+t.async.otherParam[s]+"="+t.async.otherParam[s+1];else for(v in t.async.otherParam)h+=(h.length>0?"&":"")+v+"="+t.async.otherParam[v];return n.ajax({type:t.async.type,url:u.apply(t.async.url,[t.treeId,f],t.async.url),data:h,dataType:t.async.dataType,success:function(msg){var newNodes=[];try{newNodes=msg&&msg.length!=0?typeof msg=="string"?eval("("+msg+")"):msg:[]}catch(err){}f&&(f.isAjaxing=null),r.setNodeLineIcos(t,f),newNodes&&newNodes!=""?(newNodes=u.apply(t.async.dataFilter,[t.treeId,f,newNodes],newNodes),r.addNodes(t,f,u.clone(newNodes),!!e)):r.addNodes(t,f,[],!!e),t.treeObj.trigger(i.event.ASYNC_SUCCESS,[t.treeId,f,msg]),u.apply(o)},error:function(n,u,e){r.setNodeLineIcos(t,f),f&&(f.isAjaxing=null),t.treeObj.trigger(i.event.ASYNC_ERROR,[t.treeId,f,n,u,e])}}),!0},cancelPreSelectedNode:function(u,f){for(var o=t.getRoot(u).curSelectedList,s=0,e=o.length-1;e>=s;e--)if((!f||f===o[e])&&(n("#"+o[e].tId+i.id.A).removeClass(i.node.CURSELECTED),r.setNodeName(u,o[e]),f)){t.removeSelectedNode(u,f);break}f||(t.getRoot(u).curSelectedList=[])},createNodeCallback:function(n){var r,f;if(!!n.callback.onNodeCreated||!!n.view.addDiyDom)for(r=t.getRoot(n);r.createdNodes.length>0;)f=r.createdNodes.shift(),u.apply(n.view.addDiyDom,[n.treeId,f]),!n.callback.onNodeCreated||n.treeObj.trigger(i.event.NODECREATED,[n.treeId,f])},createNodes:function(u,f,e,o){var s,h;if(e&&e.length!=0){var c=t.getRoot(u),l=u.data.key.childs,a=!o||o.open||!!n("#"+o[l][0].tId).get(0);c.createdNodes=[],s=r.appendNodes(u,f,e,o,!0,a),o?(h=n("#"+o.tId+i.id.UL),h.get(0)&&h.append(s.join(""))):u.treeObj.append(s.join("")),r.createNodeCallback(u)}},expandCollapseNode:function(f,e,o,s,h){var y=t.getRoot(f),c=f.data.key.childs,a;if(!e){u.apply(h,[]);return}if(y.expandTriggerFlag&&(a=h,h=function(){a&&a(),e.open?f.treeObj.trigger(i.event.EXPAND,[f.treeId,e]):f.treeObj.trigger(i.event.COLLAPSE,[f.treeId,e])},y.expandTriggerFlag=!1),e.open==o){u.apply(h,[]);return}!e.open&&e.isParent&&(!n("#"+e.tId+i.id.UL).get(0)||e[c]&&e[c].length>0&&!n("#"+e[c][0].tId).get(0))&&r.appendParentULDom(f,e);var l=n("#"+e.tId+i.id.UL),p=n("#"+e.tId+i.id.SWITCH),v=n("#"+e.tId+i.id.ICON);e.isParent?(e.open=!e.open,e.iconOpen&&e.iconClose&&v.attr("style",r.makeNodeIcoStyle(f,e)),e.open?(r.replaceSwitchClass(p,i.folder.OPEN),r.replaceIcoClass(e,v,i.folder.OPEN),s==!1||f.view.expandSpeed==""?(l.show(),u.apply(h,[])):e[c]&&e[c].length>0?l.slideDown(f.view.expandSpeed,h):(l.show(),u.apply(h,[]))):(r.replaceSwitchClass(p,i.folder.CLOSE),r.replaceIcoClass(e,v,i.folder.CLOSE),s==!1||f.view.expandSpeed==""?(l.hide(),u.apply(h,[])):l.slideUp(f.view.expandSpeed,h))):u.apply(h,[])},expandCollapseParentNode:function(n,t,i,u,f){if(t){if(t.parentTId)r.expandCollapseNode(n,t,i,u);else{r.expandCollapseNode(n,t,i,u,f);return}t.parentTId&&r.expandCollapseParentNode(n,t.getParentNode(),i,u,f)}},expandCollapseSonNode:function(n,i,u,f,e){var l=t.getRoot(n),h=n.data.key.childs,s=i?i[h]:l[h],a=i?!1:f,v=t.getRoot(n).expandTriggerFlag,o,c;if(t.getRoot(n).expandTriggerFlag=!1,s)for(o=0,c=s.length;o<c;o++)s[o]&&r.expandCollapseSonNode(n,s[o],u,a);t.getRoot(n).expandTriggerFlag=v,r.expandCollapseNode(n,i,u,f,e)},makeNodeFontCss:function(n,t){var i=u.apply(n.view.fontCss,[n.treeId,t],n.view.fontCss);return i&&typeof i!="function"?i:{}},makeNodeIcoClass:function(n,t){var r=["ico"];return t.isAjaxing||(r[0]=(t.iconSkin?t.iconSkin+"_":"")+r[0],t.isParent?r.push(t.open?i.folder.OPEN:i.folder.CLOSE):r.push(i.folder.DOCU)),r.join("_")},makeNodeIcoStyle:function(n,t){var i=[],r;return t.isAjaxing||(r=t.isParent&&t.iconOpen&&t.iconClose?t.open?t.iconOpen:t.iconClose:t.icon,r&&i.push("background:url(",r,") 0 0 no-repeat;"),n.view.showIcon!=!1&&u.apply(n.view.showIcon,[n.treeId,t],!0)||i.push("width:0px;height:0px;")),i.join("")},makeNodeLineClass:function(n,t){var r=[];return n.view.showLine?t.level==0&&t.isFirstNode&&t.isLastNode?r.push(i.line.ROOT):t.level==0&&t.isFirstNode?r.push(i.line.ROOTS):t.isLastNode?r.push(i.line.BOTTOM):r.push(i.line.CENTER):r.push(i.line.NOLINE),t.isParent?r.push(t.open?i.folder.OPEN:i.folder.CLOSE):r.push(i.folder.DOCU),"level"+t.level+" switch "+r.join("_")},makeNodeTarget:function(n){return n.target||"_blank"},makeNodeUrl:function(n,t){return t.url?t.url:null},makeUlHtml:function(n,t,u,f){u.push("<ul id='",t.tId,i.id.UL,"' class='level",t.level," ",r.makeUlLineClass(n,t),"' style='display:",t.open?"block":"none","'>"),u.push(f),u.push("<\/ul>")},makeUlLineClass:function(n,t){return n.view.showLine&&!t.isLastNode?i.line.LINE:""},replaceIcoClass:function(n,t,r){var f,u;if(t&&!n.isAjaxing&&(f=t.attr("class"),f!=undefined)){u=f.split("_");switch(r){case i.folder.OPEN:case i.folder.CLOSE:case i.folder.DOCU:u[u.length-1]=r}t.attr("class",u.join("_"))}},replaceSwitchClass:function(n,t){var u,r;if(n&&(u=n.attr("class"),u!=undefined)){r=u.split("_");switch(t){case i.line.ROOT:case i.line.ROOTS:case i.line.CENTER:case i.line.BOTTOM:case i.line.NOLINE:r[0]=t;break;case i.folder.OPEN:case i.folder.CLOSE:case i.folder.DOCU:r[1]=t}n.attr("class",r.join("_"))}},selectNode:function(u,f,e){e||r.cancelPreSelectedNode(u),n("#"+f.tId+i.id.A).addClass(i.node.CURSELECTED),t.addSelectedNode(u,f)},setNodeFontCss:function(t,u){var e=n("#"+u.tId+i.id.A),f=r.makeNodeFontCss(t,u);f&&e.css(f)},setNodeLineIcos:function(t,u){if(u){var s=n("#"+u.tId+i.id.SWITCH),e=n("#"+u.tId+i.id.UL),f=n("#"+u.tId+i.id.ICON),o=r.makeUlLineClass(t,u);o.length==0?e.removeClass(i.line.LINE):e.addClass(o),s.attr("class",r.makeNodeLineClass(t,u)),f.removeAttr("style"),f.attr("style",r.makeNodeIcoStyle(t,u)),f.attr("class",r.makeNodeIcoClass(t,u))}},setNodeName:function(t,r){var o=t.data.key.name,s=t.data.key.title,f=n("#"+r.tId+i.id.SPAN),e;f.empty(),f.text(r[o]),u.apply(t.view.showTitle,[t.treeId,r],t.view.showTitle)&&(e=n("#"+r.tId+i.id.A),e.attr("title",r[s]))},setNodeTarget:function(t){var u=n("#"+t.tId+i.id.A);u.attr("target",r.makeNodeTarget(t))},setNodeUrl:function(t,u){var e=n("#"+u.tId+i.id.A),f=r.makeNodeUrl(t,u);f==null||f.length==0?e.removeAttr("href"):e.attr("href",f)},switchNode:function(n,t){var i=n.data.key.childs;if(t.open||t&&t[i]&&t[i].length>0)r.expandCollapseNode(n,t,!t.open);else if(n.async.enable){if(!r.asyncNode(n,t)){r.expandCollapseNode(n,t,!t.open);return}}else t&&r.expandCollapseNode(n,t,!t.open)}},c,i;n.fn.zTree={consts:{event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_z:{tools:u,view:r,event:e,data:t},getZTreeObj:function(n){var i=t.getZTreeTools(n);return i?i:null},init:function(f,s,h){var c=u.clone(a),l,v,y;return n.extend(!0,c,s),c.treeId=f.attr("id"),c.treeObj=f,c.treeObj.empty(),o[c.treeId]=c,n.browser.msie&&parseInt(n.browser.version)<7&&(c.view.expandSpeed=""),t.initRoot(c),l=t.getRoot(c),v=c.data.key.childs,h=h?u.clone(u.isArray(h)?h:[h]):[],l[v]=c.data.simpleData.enable?t.transformTozTreeFormat(c,h):h,t.initCache(c),e.bindTree(c),e.bindEvent(c),l[v]&&l[v].length>0?r.createNodes(c,0,l[v]):c.async.enable&&c.async.url&&c.async.url!==""&&r.asyncNode(c),y={setting:c,cancelSelectedNode:function(n){r.cancelPreSelectedNode(this.setting,n)},expandAll:function(n){var u,i,f;if(n!==!0&&n!==!1){for(n=null,u=t.getNodes(this.setting),i=0,f=u.length;i<f;i++)if(u[i].isParent){n=!u[i].open;break}if(n==null)return n}return r.expandCollapseSonNode(this.setting,null,n,!0),n},expandNode:function(f,e,o,s){return!f||!f.isParent?null:(e!==!0&&e!==!1&&(e=!f.open),e&&u.apply(c.callback.beforeExpand,[c.treeId,f],!0)==!1)?null:!e&&u.apply(c.callback.beforeCollapse,[c.treeId,f],!0)==!1?null:(e&&f.parentTId&&r.expandCollapseParentNode(this.setting,f.getParentNode(),e,!1),e===f.open&&!o)?null:(t.getRoot(c).expandTriggerFlag=!0,o?r.expandCollapseSonNode(this.setting,f,e,!0,function(){s!==!1&&n("#"+f.tId+i.id.ICON).focus().blur()}):(f.open=!e,r.switchNode(this.setting,f),s!==!1&&n("#"+f.tId+i.id.ICON).focus().blur()),e)},getNodes:function(){return t.getNodes(this.setting)},getNodeByParam:function(n,i,r){return n?t.getNodeByParam(this.setting,r?r[this.setting.data.key.childs]:t.getNodes(this.setting),n,i):null},getNodeByTId:function(n){return t.getNodeCache(this.setting,n)},getNodesByParam:function(n,i,r){return n?t.getNodesByParam(this.setting,r?r[this.setting.data.key.childs]:t.getNodes(this.setting),n,i):null},getNodesByParamFuzzy:function(n,i,r){return n?t.getNodesByParamFuzzy(this.setting,r?r[this.setting.data.key.childs]:t.getNodes(this.setting),n,i):null},getNodeIndex:function(n){var r,u,i,f;if(!n)return null;for(r=c.data.key.childs,u=n.parentTId?n.getParentNode():t.getRoot(this.setting),i=0,f=u[r].length;i<f;i++)if(u[r][i]==n)return i;return-1},getSelectedNodes:function(){for(var i=[],r=t.getRoot(this.setting).curSelectedList,n=0,u=r.length;n<u;n++)i.push(r[n]);return i},isSelectedNode:function(n){return t.isSelectedNode(this.setting,n)},reAsyncChildNodes:function(u,f,e){var o,s;this.setting.async.enable&&(o=!u,o&&(u=t.getRoot(this.setting)),f=="refresh"&&(u[this.setting.data.key.childs]=[],o?this.setting.treeObj.empty():(s=n("#"+u.tId+i.id.UL),s.empty())),r.asyncNode(this.setting,o?null:u,!!e))},refresh:function(){this.setting.treeObj.empty();var n=t.getRoot(this.setting),i=n[this.setting.data.key.childs];t.initRoot(this.setting),n[this.setting.data.key.childs]=i,t.initCache(this.setting),r.createNodes(this.setting,0,n[this.setting.data.key.childs])},selectNode:function(t,f){t&&u.uCanDo(this.setting)&&(f=c.view.selectedMulti&&f,t.parentTId?r.expandCollapseParentNode(this.setting,t.getParentNode(),!0,!1,function(){n("#"+t.tId+i.id.ICON).focus().blur()}):n("#"+t.tId+i.id.ICON).focus().blur(),r.selectNode(this.setting,t,f))},transformTozTreeNodes:function(n){return t.transformTozTreeFormat(this.setting,n)},transformToArray:function(n){return t.transformToArrayFormat(this.setting,n)},updateNode:function(t){if(t){var i=n("#"+t.tId);i.get(0)&&u.uCanDo(this.setting)&&(r.setNodeName(this.setting,t),r.setNodeTarget(t),r.setNodeUrl(this.setting,t),r.setNodeLineIcos(this.setting,t),r.setNodeFontCss(this.setting,t))}}},l.treeTools=y,t.setZTreeTools(c,y),y}},c=n.fn.zTree,i=c.consts})(jQuery);
//@ sourceMappingURL=jquery.ztree.core-3.0.min.js.map